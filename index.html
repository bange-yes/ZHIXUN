<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¤¾åŒºåº”ç”¨</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        body {
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        .page-content {
            flex: 1;
            overflow-y: auto;
        }
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #fff;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            border-top: 1px solid #e0e0e0;
        }
        .search-page {
            padding: 10px;
        }
        .search-page .search-bar {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .search-page .search-bar input {
            flex: 1;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 20px;
        }
        .search-page .search-bar .search-icon {
            margin-left: -30px;
            color: #888;
        }
        .search-history, .ai-suggestions {
            margin-bottom: 20px;
        }
        .search-history h3, .ai-suggestions h3 {
            font-size: 14px;
            color: #888;
            margin-bottom: 10px;
        }
        .tag {
            display: inline-block;
            background-color: #f0f0f0;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 15px;
            font-size: 14px;
        }
        .location-dropdown {
            position: relative;
            display: inline-block;
        }
        .location-content {
            display: none;
            position: absolute;
            background-color: #f9f9f9;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
            z-index: 1;
            max-height: 300px;
            overflow-y: auto;
        }
        .location-content a {
            color: black;
            padding: 12px 16px;
            text-decoration: none;
            display: block;
        }
        .location-content a:hover {
            background-color: #f1f1f1;
        }
        .show {
            display: block;
        }
        /* æ·»åŠ æ¶ˆæ¯é¡µé¢çš„æ ·å¼ */
        .message-page {
            padding: 10px;
        }
        .message-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        .message-list {
            list-style-type: none;
            padding: 0;
        }
        .message-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .message-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            margin-right: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
        }
        .message-content {
            flex: 1;
        }
        .message-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        .message-preview {
            color: #888;
            font-size: 14px;
        }
        /* æ·»åŠ èŠå¤©ç•Œé¢çš„æ ·å¼ */
        .chat-page {
            display: none;
            flex-direction: column;
            height: 100vh;
            background-color: #f0f0f0;
        }
        .chat-header {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #f8f8f8;
            border-bottom: 1px solid #e0e0e0;
        }
        .chat-header button {
            background: none;
            border: none;
            font-size: 24px;
            color: #333;
        }
        .chat-header h2 {
            flex-grow: 1;
            text-align: center;
            margin: 0;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            display: flex;
            flex-direction: column;
        }
        .message {
            max-width: 70%;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 20px;
            word-wrap: break-word;
        }
        .message-left {
            align-self: flex-start;
            background-color: #fff;
        }
        .message-right {
            align-self: flex-end;
            background-color: #95ec69;
        }
        .chat-input-container {
            padding: 10px;
            background-color: #f8f8f8;
            border-top: 1px solid #e0e0e0;
        }
        .chat-input {
            display: flex;
        }
        .chat-input input {
            flex: 1;
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 20px;
            margin-right: 10px;
        }
        .chat-input button {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 20px;
        }
        /* æ·»åŠ  "æˆ‘çš„" é¡µé¢æ ·å¼ */
        .profile-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f0f0f0;
        }
        .profile-info {
            display: flex;
            align-items: center;
            padding: 20px;
            background-color: #fff;
        }
        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-right: 15px;
        }
        .profile-name {
            font-size: 18px;
            font-weight: bold;
        }
        .profile-id {
            font-size: 14px;
            color: #888;
        }
        .profile-edit-button {
            margin-left: auto;
            background: none;
            border: none;
            font-size: 20px;
        }
        .profile-stats {
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            background-color: #f9f9f9;
        }
        .stat-item {
            text-align: center;
        }
        .stat-number {
            font-size: 18px;
            font-weight: bold;
        }
        .stat-label {
            font-size: 14px;
            color: #888;
        }
        .profile-menu {
            list-style-type: none;
            padding: 0;
            margin: 0;
            background-color: #fff;
        }
        .profile-menu li {
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            display: flex;
            align-items: center;
        }
        .menu-icon {
            margin-right: 10px;
            font-size: 20px;
        }
        /* ä¸ªäººä¿¡æ¯è¯¦æƒ…é¡µé¢æ ·å¼ */
        .page-header {
            display: flex;
            align-items: center;
            padding: 10px;
            background-color: #f0f0f0;
            border-bottom: 1px solid #e0e0e0;
        }
        .page-header button {
            background: none;
            border: none;
            font-size: 24px;
            margin-right: 10px;
        }
        .page-header h2 {
            margin: 0;
        }
        .personal-info-list {
            background-color: #fff;
        }
        .info-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        .info-label {
            flex: 1;
            color: #333;
        }
        .info-value {
            color: #888;
            margin-right: 10px;
        }
        .info-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 10px;
        }
        .info-arrow {
            color: #ccc;
        }
        .message-item .message-icon img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
        }

        .chat-header img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }

        .message img {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            margin-right: 10px;
            object-fit: cover;
        }
        /* æ·»åŠ å¤´åƒé€‰æ‹©ç•Œé¢çš„æ ·å¼ */
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            padding: 15px;
        }
        .avatar-option {
            width: 100%;
            height: auto;
            border-radius: 50%;
            cursor: pointer;
        }
        .avatar-option:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>
    <div id="main-page" class="page-content">
        <header>
            <div class="location-dropdown">
                <div class="location" id="location-button">åœ°åŒº</div>
                <div class="location-content" id="location-dropdown">
                    <a href="#">æ­¦æ˜ŒåŒº</a>
                    <a href="#">æ´ªå±±åŒº</a>
                    <a href="#">æ±Ÿæ±‰åŒº</a>
                    <a href="#">æ±Ÿå²¸åŒº</a>
                    <a href="#">ç¡šå£åŒº</a>
                    <a href="#">æ±‰é˜³åŒº</a>
                    <a href="#">é’å±±åŒº</a>
                    <a href="#">è”¡ç”¸åŒº</a>
                    <a href="#">æ±Ÿå¤åŒº</a>
                    <a href="#">é»„é™‚åŒº</a>
                    <a href="#">æ–°æ´²åŒº</a>
                    <a href="#">ä¸œè¥¿æ¹–åŒº</a>
                    <a href="#">æ±‰å—åŒº</a>
                </div>
            </div>
            <div class="search-bar">
                <input type="text" placeholder="ç´¢...">
            </div>
        </header>
        
        <div class="action-buttons">
            <button class="find-item">
                <span class="button-text">æˆ‘è¦å¯»ç‰©</span>
            </button>
            <button class="find-person">
                <span class="button-text">æˆ‘è¦æ‰¾äºº</span>
            </button>
        </div>
        
        <div class="posts">
            <div class="post">
                <div class="user-info">
                    <img src="images/pluto-avatar.png" alt="Pluto" class="avatar">
                    <span class="username">Pluto</span>
                    <span class="time">36åˆ†é’Ÿå‰</span>
                </div>
                <p class="content">é£åå›­ï¼Œè”¡æ˜ä¼Ÿï¼Œæ‰‹æœºéƒ½ä¸è¦å•¦</p>
                <img src="images/post-image-noodles.png" alt="æ¡Œå­ä¸Šçš„æ³¡é¢å’Œæ‰‹æœº" class="post-image">
                <div class="post-meta">
                    <span class="device">iPhone 15 Pro</span>
                    <span class="arrival-time">16:30å·¦å³åˆ°</span>
                    <span class="location">é£åå›­</span>
                </div>
                <div class="post-actions">
                    <button class="like"></button>
                    <button class="comment"></button>
                    <button class="share"></button>
                </div>
            </div>
            <!-- å¯ä»¥æ·»åŠ æ›´å¤šçš„å¸–å­ -->
        </div>
    </div>

    <div id="post-page" class="page-content" style="display: none;">
        <header>
            <button id="back-button">&lt;</button>
            <div class="more-options">...</div>
        </header>
        <div class="input-area">
            <textarea placeholder="é”®å…¥å†…å®¹......"></textarea>
        </div>
        <div class="action-buttons">
            <button class="insert-image">
                <span class="icon">ğŸ–¼ï¸</span>
                <span class="button-text">æ’å…¥å›¾ç‰‡</span>
            </button>
            <button class="ai-complete">
                <span class="icon">ğŸ¤–</span>
                <span class="button-text">æ™ºèƒ½å¡«å……</span>
            </button>
        </div>
    </div>

    <div id="search-page" class="page-content" style="display: none;">
        <div class="search-page">
            <div class="search-bar">
                <input type="text" placeholder="é”®å…¥ä½ æƒ³è¦çš„å†…å®¹">
                <span class="search-icon">ğŸ”</span>
            </div>
            <div class="search-history">
                <h3>æœç´¢å†å²</h3>
                <div class="tags">
                    <span class="tag">èº«ä»½è¯</span>
                    <span class="tag">æ‰‹æåŒ…</span>
                    <span class="tag">ä¼</span>
                </div>
            </div>
            <div class="ai-suggestions">
                <h3>æ™ºèƒ½æ¨è</h3>
                <div class="tags">
                    <span class="tag">æ¹–åŒ—å¤§å­¦ï¼ˆé˜³é€»æ ¡åŒºï¼‰</span>
                    <span class="tag">æ¹–åŒ—å¤§å­¦ï¼ˆæ­¦æ˜Œæ ¡åŒºï¼‰</span>
                    <span class="tag">ä»Šå¤©ä¸Šåˆ 8 æ—¶å·¦å³</span>
                </div>
            </div>
        </div>
    </div>

    <div id="message-page" class="page-content" style="display: none;">
        <div class="message-page">
            <div class="message-header">
                <h2>æ¶ˆæ¯</h2>
            </div>
            <ul class="message-list">
                <li class="message-item" data-chat="system">
                    <div class="message-icon" style="background-color: #A0C4FF;">ğŸ””</div>
                    <div class="message-content">
                        <div class="message-title">ç³»ç»Ÿæ¶ˆæ¯</div>
                        <div class="message-preview">æ¬¢è¿ä½¿ç”¨ç¤¾åŒºåº”ç”¨</div>
                    </div>
                </li>
                <li class="message-item" data-chat="customer-service">
                    <div class="message-icon" style="background-color: #BDB2FF;">ğŸ§</div>
                    <div class="message-content">
                        <div class="message-title">æˆ‘çš„å®¢æœ</div>
                        <div class="message-preview">æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©æ‚¨çš„å—ï¼Ÿ</div>
                    </div>
                </li>
                <li class="message-item" data-chat="mentions">
                    <div class="message-icon" style="background-color: #A0E7E5;">@</div>
                    <div class="message-content">
                        <div class="message-title">æåˆ°äº†æˆ‘</div>
                        <div class="message-preview">æŸ¥çœ‹æœ€æ–°çš„æåŠ</div>
                    </div>
                </li>
                <li class="message-item" data-chat="likes">
                    <div class="message-icon" style="background-color: #FFAFCC;">ğŸ‘</div>
                    <div class="message-content">
                        <div class="message-title">æˆ‘æ”¶åˆ°çš„èµ</div>
                        <div class="message-preview">æŸ¥çœ‹æœ€æ–°çš„ç‚¹èµ</div>
                    </div>
                </li>
                <li class="message-item" data-chat="lifetime">
                    <div class="message-icon">
                        <img src="images/lifetime-avatar.png" alt="Lifetime">
                    </div>
                    <div class="message-content">
                        <div class="message-title">Lifetime (æ±Ÿç¿”)</div>
                        <div class="message-preview">ä½ å¥½ï¼Œè¯·é—®æ˜¯ä½ æ¡åˆ°äº†æˆ‘çš„èº«ä»½è¯å—</div>
                    </div>
                </li>
            </ul>
        </div>
    </div>

    <!-- æ›´æ–°èŠå¤©ç•Œé¢ -->
    <div id="chat-page" class="chat-page">
        <div class="chat-header">
            <button id="chat-back-button">&lt;</button>
            <img src="images/lifetime-avatar.png" alt="Lifetime" style="width: 30px; height: 30px; border-radius: 50%; margin-right: 10px;">
            <h2 id="chat-title">Lifetime (æ±Ÿç¿”)</h2>
            <button class="more-options">â‹®</button>
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- èŠå¤©æ¶ˆæ¯å°†åœ¨è¿™é‡ŒåŠ¨æ€æ·»åŠ  -->
        </div>
        <div class="chat-input-container">
            <div class="chat-input">
                <input type="text" id="chat-input" placeholder="è¾“å…¥æ¶ˆæ¯...">
                <button id="send-message">å‘é€</button>
            </div>
        </div>
    </div>

    <!-- åœ¨å…¶ä»–é¡µé¢å†…å®¹ä¹‹åæ·»åŠ  "æˆ‘çš„" é¡µé¢ -->
    <div id="profile-page" class="page-content" style="display: none;">
        <div class="profile-header">
            <h2>æˆ‘çš„</h2>
            <button class="expand-button">â¤¢</button>
        </div>
        <div class="profile-info">
            <img src="images/user-avatar.png" alt="ç”¨æˆ·å¤´åƒ" class="profile-avatar">
            <div class="profile-name">ä¸Šä¸Šç­¾</div>
            <div class="profile-id">ID:2024xxxxxxxxx</div>
            <button class="profile-edit-button">&gt;</button>
        </div>
        <div class="profile-stats">
            <div class="stat-item">
                <div class="stat-number">2</div>
                <div class="stat-label">æˆ‘ä¸¢å¤±çš„</div>
            </div>
            <div class="stat-item">
                <div class="stat-number">4</div>
                <div class="stat-label">æˆ‘æ¡åˆ°çš„</div>
            </div>
        </div>
        <ul class="profile-menu">
            <li><span class="menu-icon">ğŸ–¼ï¸</span> æˆ‘çš„å›¾æ–‡</li>
            <li><span class="menu-icon">ğŸ•’</span> æµè§ˆå†å²</li>
            <li><span class="menu-icon">ğŸ”’</span> éšç§ä¿æŠ¤</li>
            <li><span class="menu-icon">â­</span> ä¿¡èª‰è¯„åˆ†</li>
            <li><span class="menu-icon">âš™ï¸</span> è®¾ç½®</li>
            <li><span class="menu-icon">â„¹ï¸</span> å…³äº</li>
        </ul>
    </div>

    <!-- åœ¨å…¶ä»–é¡µé¢å†…å®¹ä¹‹åæ·»åŠ ä¸ªäººä¿¡æ¯è¯¦æƒ…é¡µé¢ -->
    <div id="personal-info-page" class="page-content" style="display: none;">
        <div class="page-header">
            <button id="personal-info-back-button">&lt;</button>
            <h2>ä¸ªäººä¿¡æ¯</h2>
        </div>
        <div class="personal-info-list">
            <div class="info-item" id="avatar-item">
                <span class="info-label">å¤´åƒ</span>
                <img src="images/user-avatar.png" alt="ç”¨æˆ·å¤´åƒ" class="info-avatar" id="user-avatar">
                <span class="info-arrow">&gt;</span>
            </div>
            <div class="info-item">
                <span class="info-label">å§“å</span>
                <span class="info-value">ä¸Šä¸Šç­¾</span>
                <span class="info-arrow">&gt;</span>
            </div>
            <div class="info-item">
                <span class="info-label">ID</span>
                <span class="info-value">2024xxxxxxxxx</span>
                <span class="info-arrow">&gt;</span>
            </div>
            <div class="info-item">
                <span class="info-label">å·²åŠ å…¥ç¤¾åŒº</span>
                <span class="info-value">æ¹–åŒ—å¤§å­¦ï¼ˆé˜³é€»æ ¡åŒºï¼‰</span>
                <span class="info-arrow">&gt;</span>
            </div>
            <div class="info-item">
                <span class="info-label">å®åæ€</span>
                <span class="info-value">å·²å®å</span>
                <span class="info-arrow">&gt;</span>
            </div>
        </div>
    </div>

    <!-- åœ¨ personal-info-page ä¸­æ·»åŠ å¤´åƒé€‰æ‹©ç•Œé¢ -->
    <div id="avatar-selection" style="display: none;">
        <div class="page-header">
            <button id="avatar-selection-back-button">&lt;</button>
            <h2>é€‰æ‹©å¤´åƒ</h2>
        </div>
        <div class="avatar-grid">
            <img src="images/avatar1.png" alt="Avatar 1" class="avatar-option">
            <img src="images/avatar2.png" alt="Avatar 2" class="avatar-option">
            <img src="images/avatar3.png" alt="Avatar 3" class="avatar-option">
            <img src="images/avatar4.png" alt="Avatar 4" class="avatar-option">
            <!-- æ·»åŠ æ›´å¤šé¢„è®¾å¤´åƒ -->
        </div>
    </div>

    <nav class="bottom-nav">
        <button class="home">ä¸»é¡µ</button>
        <button class="messages">æ¶ˆæ¯</button>
        <button class="profile">æˆ‘çš„</button>
    </nav>

    <script>
        document.querySelector('.find-item').addEventListener('click', showPostPage);
        document.querySelector('.find-person').addEventListener('click', showPostPage);
        document.getElementById('back-button').addEventListener('click', showMainPage);
        document.querySelector('.search-bar input').addEventListener('click', showSearchPage);
        document.getElementById('search-page').querySelector('.search-bar input').addEventListener('click', function(e) {
            e.stopPropagation(); // é˜²æ­¢æœç´¢é¡µé¢çš„è¾“å…¥æ¡†è§¦å‘showSearchPage
        });

        function showPostPage() {
            document.getElementById('main-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'block';
        }

        function showMainPage() {
            document.getElementById('search-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'none';
            document.getElementById('message-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('profile-page').style.display = 'none';
            document.getElementById('main-page').style.display = 'block';
        }

        function showSearchPage() {
            document.getElementById('main-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'none';
            document.getElementById('search-page').style.display = 'block';
        }

        document.querySelector('.bottom-nav .home').addEventListener('click', showMainPage);

        function showMainPage() {
            document.getElementById('search-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'none';
            document.getElementById('message-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('profile-page').style.display = 'none';
            document.getElementById('main-page').style.display = 'block';
        }

        document.getElementById('location-button').addEventListener('click', function() {
            document.getElementById('location-dropdown').classList.toggle('show');
        });

        // ç‚¹å‡»åœ°åŒºé€‰é¡¹æ—¶æ›´æ–°åœ°åŒºæ–‡æœ¬å¹¶å…³é—­ä¸‹æ‹‰åˆ—è¡¨
        document.querySelectorAll('#location-dropdown a').forEach(function(item) {
            item.addEventListener('click', function(e) {
                e.preventDefault();
                document.getElementById('location-button').textContent = this.textContent;
                document.getElementById('location-dropdown').classList.remove('show');
            });
        });

        // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹æ—¶å…³é—­ä¸‹æ‹‰åˆ—è¡¨
        window.addEventListener('click', function(e) {
            if (!e.target.matches('.location')) {
                var dropdown = document.getElementById('location-dropdown');
                if (dropdown.classList.contains('show')) {
                    dropdown.classList.remove('show');
                }
            }
        });

        // ä¿®æ”¹æ˜¾ç¤ºæ¶ˆæ¯é¡µé¢çš„å‡½æ•°
        function showMessagePage() {
            document.getElementById('main-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'none';
            document.getElementById('search-page').style.display = 'none';
            document.getElementById('profile-page').style.display = 'none';
            document.getElementById('personal-info-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('message-page').style.display = 'block';
        }

        // ä¿®æ”¹åº•éƒ¨å¯¼èˆªæ çš„äº‹ä»¶ç›‘å¬å™¨
        document.querySelector('.bottom-nav .home').addEventListener('click', showMainPage);
        document.querySelector('.bottom-nav .messages').addEventListener('click', showMessagePage);
        document.querySelector('.bottom-nav .profile').addEventListener('click', showProfilePage);

        // ä¸ºæ¯ä¸ªæ¯é¡¹æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.message-item').forEach(item => {
            item.addEventListener('click', function() {
                const chatId = this.getAttribute('data-chat');
                const chatTitle = this.querySelector('.message-title').textContent;
                showChatPage(chatId, chatTitle);
            });
        });

        function showChatPage(chatId, chatTitle) {
            document.getElementById('message-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'flex';
            document.getElementById('chat-title').textContent = chatTitle;
            loadChatMessages(chatId);
        }

        function loadChatMessages(chatId) {
            const chatMessages = document.getElementById('chat-messages');
            chatMessages.innerHTML = ''; // æ¸…ç©ºç°æœ‰æ¶ˆæ¯

            // æ¨¡æ‹ŸèŠå¤©è®°å½•
            const messages = [
                { sender: 'other', content: 'ä½ å¥½ï¼Œè¯·é—®æ˜¯ä½ æ¡åˆ°äº†æˆ‘çš„èº«ä»½è¯å—', avatar: 'images/lifetime-avatar.png' },
                { sender: 'me', content: 'æ˜¯çš„ï¼Œæˆ‘åœ¨å­¦æ ¡å›¾ä¹¦é¦†é™„è¿‘æ¡åˆ°äº†ä¸€å¼ èº«ä»½è¯ã€‚' },
                { sender: 'other', content: 'å¤ªæ„Ÿè°¢äº†ï¼æˆ‘å¯ä»¥å»å“ªé‡Œå–å›å‘¢ï¼Ÿ', avatar: 'images/lifetime-avatar.png' },
                { sender: 'me', content: 'æˆ‘ç°åœ¨åœ¨å›¾ä¹¦é¦†è‡ªä¹ ï¼Œä½ æ–¹ä¾¿è¿‡æ¥æ‹¿å—ï¼Ÿ' },
                { sender: 'other', content: 'å¥½çš„ï¼Œæˆ‘ç°åœ¨å°±è¿‡å»ã€‚å¤§æ¦‚éœ€è¦15åˆ†é’Ÿï¼Œéº»çƒ¦ä½ ç¨ç­‰ä¸€ä¸‹ã€‚', avatar: 'images/lifetime-avatar.png' },
                { sender: 'me', content: 'æ²¡é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨å›¾ä¹¦é¦†é—¨å£ç­‰ä½ ã€‚' },
            ];

            messages.forEach(message => {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message');
                messageElement.classList.add(message.sender === 'me' ? 'message-right' : 'message-left');
                
                if (message.avatar) {
                    const avatarElement = document.createElement('img');
                    avatarElement.src = message.avatar;
                    avatarElement.alt = 'Avatar';
                    messageElement.appendChild(avatarElement);
                }
                
                const contentElement = document.createElement('span');
                contentElement.textContent = message.content;
                messageElement.appendChild(contentElement);
                
                chatMessages.appendChild(messageElement);
            });

            // æ»šåŠ¨åˆ°æœ€æ–°æ¶ˆæ¯
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        document.getElementById('chat-back-button').addEventListener('click', function() {
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('message-page').style.display = 'block';
        });

        // æ·»åŠ å‘é€æ¶ˆæ¯çš„åŠŸèƒ½
        document.getElementById('send-message').addEventListener('click', sendMessage);
        document.getElementById('chat-input').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        function sendMessage() {
            const input = document.getElementById('chat-input');
            const message = input.value.trim();
            if (message) {
                const chatMessages = document.getElementById('chat-messages');
                const messageElement = document.createElement('div');
                messageElement.classList.add('message', 'message-right');
                messageElement.textContent = message;
                chatMessages.appendChild(messageElement);
                input.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // æ·»åŠ æ˜¾ç¤º "æˆ‘çš„" é¡µé¢çš„å‡½æ•°
        function showProfilePage() {
            document.getElementById('main-page').style.display = 'none';
            document.getElementById('post-page').style.display = 'none';
            document.getElementById('search-page').style.display = 'none';
            document.getElementById('message-page').style.display = 'none';
            document.getElementById('chat-page').style.display = 'none';
            document.getElementById('profile-page').style.display = 'block';
        }

        // ä¸ºåº•éƒ¨å¯¼èˆªæ çš„æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelector('.bottom-nav .profile').addEventListener('click', showProfilePage);

        // æ·»åŠ æ˜¾ç¤ºä¸ªäººä¿¡æ¯è¯¦æƒ…é¡µé¢çš„å‡½æ•°
        function showPersonalInfoPage() {
            document.getElementById('profile-page').style.display = 'none';
            document.getElementById('personal-info-page').style.display = 'block';
        }

        // ä¸ºä¸ªäººä¿¡æ¯æ æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.querySelector('.profile-info').addEventListener('click', showPersonalInfoPage);

        // ä¸ºè¿”å›æŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
        document.getElementById('personal-info-back-button').addEventListener('click', function() {
            document.getElementById('personal-info-page').style.display = 'none';
            document.getElementById('profile-page').style.display = 'block';
        });

        // ä¿®æ”¹å¤´åƒé¡¹çš„ç‚¹å‡»äº‹ä»¶
        document.getElementById('avatar-item').addEventListener('click', function() {
            document.getElementById('personal-info-page').style.display = 'none';
            document.getElementById('avatar-selection').style.display = 'block';
        });

        // åœ¨è„šæœ¬å¼€å§‹å¤„æ·»åŠ è¿™ä¸ªå‡½æ•°
        function loadSavedAvatar() {
            const savedAvatar = localStorage.getItem('userAvatar');
            if (savedAvatar) {
                document.getElementById('user-avatar').src = savedAvatar;
                document.querySelector('.profile-avatar').src = savedAvatar;
            }
        }

        // åœ¨é¡µé¢åŠ è½½æ—¶è°ƒç”¨è¿™ä¸ªå‡½æ•°
        window.addEventListener('load', loadSavedAvatar);

        // ä¿®æ”¹å¤´åƒé€‰æ‹©çš„äº‹ä»¶å¤„ç†
        document.querySelectorAll('.avatar-option').forEach(function(avatar) {
            avatar.addEventListener('click', function() {
                const newAvatarSrc = this.src;
                document.getElementById('user-avatar').src = newAvatarSrc;
                document.querySelector('.profile-avatar').src = newAvatarSrc;
                // ä¿å­˜é€‰æ‹©çš„å¤´åƒåˆ° localStorage
                localStorage.setItem('userAvatar', newAvatarSrc);
                document.getElementById('avatar-selection').style.display = 'none';
                document.getElementById('personal-info-page').style.display = 'block';
            });
        });

        // æ·»åŠ è¿”å›æŒ‰é’®çš„äº‹ä»¶ç›‘å¬å™¨
        document.getElementById('avatar-selection-back-button').addEventListener('click', function() {
            document.getElementById('avatar-selection').style.display = 'none';
            document.getElementById('personal-info-page').style.display = 'block';
        });
    </script>
</body>
</html>
